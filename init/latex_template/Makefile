# partly autogenerated, that's why it's so ugly!

# say 'make V=1' to see the full build output
ifndef V
Q = @
Q_LATEX = sh -c 'echo -e "   " `echo $$(basename "$$0") | tr a-z A-Z`"\t$${!\#/..\/..\//}"; ! "$$0" "$$@" | grep -A5 -E "^[^ ]+:[0-9]+:"'
Q_OTHER = sh -c 'echo -e "   " `echo $$(basename "$$0") | tr a-z A-Z`"\t$${!\#/..\/..\//}"; "$$0" "$$@" >/dev/null'
endif

LATEX = latex
PDFLATEX = pdflatex
BIBTEX = bibtex
DVIPS = dvips
DVIPDF = dvipdf
PDFTOEPS = pdftops -eps
PDFTOPS = pdf2ps
EPSTOPDF = epstopdf
FIGTODEV = fig2dev
MPOST = mpost

.PHONY: all clean archive

all:  grzegorzMakosaGraded1

texfiles = $(wildcard *.tex)

.PHONY: grzegorzMakosaGraded1
grzegorzMakosaGraded1: grzegorzMakosaGraded1.pdf

grzegorzMakosaGraded1.pdf: $(texfiles) grzegorzMakosaGraded1.bbl
	$(Q) rm -rf build/pdf/; mkdir -p build/pdf/
	$(Q) cd build/pdf/ && TEXINPUTS="../../:$$TEXINPUTS" $(Q_LATEX) $(PDFLATEX) -interaction=nonstopmode -file-line-error ../../grzegorzMakosaGraded1.tex
	$(Q) cd build/pdf/ && TEXINPUTS="../../:$$TEXINPUTS" $(Q_LATEX) $(PDFLATEX) -interaction=nonstopmode -file-line-error ../../grzegorzMakosaGraded1.tex
	$(Q) cd build/pdf/ && TEXINPUTS="../../:$$TEXINPUTS" $(Q_LATEX) $(PDFLATEX) -interaction=nonstopmode -file-line-error ../../grzegorzMakosaGraded1.tex
	$(Q) ln -f build/pdf/grzegorzMakosaGraded1.pdf grzegorzMakosaGraded1.pdf

grzegorzMakosaGraded1.aux: $(texfiles)
	$(Q) $(Q_LATEX) $(LATEX) -interaction=nonstopmode -file-line-error grzegorzMakosaGraded1.tex

clean:
	rm -rf build/
	rm -f *.aux
	rm -f grzegorzMakosaGraded1.dvi grzegorzMakosaGraded1.idx grzegorzMakosaGraded1.ind grzegorzMakosaGraded1.ilg grzegorzMakosaGraded1.out grzegorzMakosaGraded1.toc grzegorzMakosaGraded1.pdf grzegorzMakosaGraded1.log

# archive: grzegorzMakosaGraded1-template.zip

# grzegorzMakosaGraded1-template.zip: *.tex Makefile ETHlogo.* refs.bib
# 	mkdir -p grzegorzMakosaGraded1
# 	cp `git ls-files "*.tex" Makefile "ETHlogo.*" refs.bib` grzegorzMakosaGraded1/
# 	perl -i -pe 's/\$$VERSION\$$/'"$$(git describe)/" grzegorzMakosaGraded1/*.tex
# 	rm -f grzegorzMakosaGraded1-template.zip
# 	zip -r grzegorzMakosaGraded1-template.zip grzegorzMakosaGraded1/
