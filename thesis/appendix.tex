\chapter{Appendix}
\section{Concentration Bounds}
\begin{lemma}[Chernoff Bounds]
For independent Bernoulli distributed random variables $X_1, \dotsc, X_n$ with $X := \sum_{i=1}^n X_i$
and $\Pr[X_i = 1] = p_i$ for all $ 1 \leq  i \leq n$ the following inequalities hold
\begin{gather}
\label{ineq:ch0}
\Pr[X \geq (1+\delta) \mathbb{E}[X]] \leq e^{- \mathbb{E}[X] \delta^2/3} \\
\label{ineq:ch1}
\Pr[X \leq (1-\delta) \mathbb{E}[X]] \leq e^{- \mathbb{E}[X] \delta^2/2} \\
\label{ineq:ch2}
\Pr[|X - \mathbb{E}[X]| \geq \delta \mathbb{E}[X]] \leq 2 e^{- \mathbb{E}[X] \delta^2 / 3},
\end{gather}
where $0 \leq \delta \leq 1$.

For independent and identically distributed Bernoulli random variables $X_1, \dotsc, X_n$ with $X := \sum_{i=1}^n X_i$
where $\Pr[X_i = 1] = p$ for some $p \in (0,1)$ for all $ 1 \leq  i \leq n$ we have
\begin{gather}
\label{ineq:ch3}
\Pr[x \geq (p + \varepsilon)n] \leq e^{-\frac{\epsilon^2k}{2}}.
\end{gather}

\end{lemma}
\vspace*{\fill}
\pagebreak

\section{The Proof of Lemma \ref{lemma:sec_amp_for_p_hash} Under the Simplifying Assumptions}
\label{st:proofSimAssm}
We prove Lemma \ref{lemma:sec_amp_for_p_hash} in the case where $\widetilde{Gen}$ does not find the randomness for which the surplus is large.
For the sake of simplicity we make the following assumptions
\begin{gather}
  \label{pr:always_d}
\underset{
  \mathclap{
  \substack{\pi, \rho \\ x := \langle P^{(1)}(\pi), D_1(\rho) \rangle_{\trans}}}}
{\Pr}[\widetilde{D}_2(x,\rho) \neq \bot] = 1 \\
  \label{pr:low_surpluses}
\forall \pi \in \{0,1\}^{n} : S_{\pi, b} \leq \Big(1 - \frac{1}{k}\Big)\epsilon.
\end{gather}
In \eqref{pr:always_d} we assume that $\widetilde{D}$ always outputs an answer, and in \eqref{pr:low_surpluses} that all surpluses are low.
In the complete proof of Lemma \ref{lemma:sec_amp_for_p_hash} these assumptions fail only slightly such that it is possible
to obtain the desired result. However, the calculations are fairly lengthy.
The following simplified proof is intended to give the intuition behind the full proof.
We have
\begin{align*}
\underset{
  \mathclap{
  \substack{\pi, \rho \\ x := \langle P^{(1)}(\pi), D_1(\rho) \rangle_{\trans}
    \\ (\Gamma_V, \Gamma_H) := \langle P^{(1)}(\pi), D_1 (\rho) \rangle_{P^{(1)}} }}}
{\Pr}[\Gamma_V&(\widetilde{D}_2(x,\rho)) = 1]
  \overset{\eqref{pr:always_d}}{=}
\underset{
  \mathclap{
  \substack{\pi, \rho \\ x := \langle P^{(1)}(\pi), D_1(\rho) \rangle_{\trans}
    \\ (\Gamma_V, \Gamma_H) := \langle P^{(1)}(\pi), D_1 (\rho) \rangle_{P^{(1)}} }}}
{\Pr}[\Gamma_V(\widetilde{D}_2(x,\rho)) = 1 \mid \widetilde{D}_2(x,\rho) \neq \bot] \\
  &\overset{\hphantom{a}(*)\hphantom{a}}{=} \underset{\pi^{(k)}}{\Pr}[c_1 = 1 \mid c \in \cG_1 \setminus \cG_0] \\
  &\overset{\eqref{eq:diff_s01_next}}{=} \underset{\pi^*}{\mathbb{E}}
  \left[\frac{\Pr_{\pi^{(k)}}[c_1 = 1 \mid c \in \cG_1 \setminus \cG_0] \big(\Pr_{\pi^{(k)}}[c \in \cG_1 \setminus \cG_0] - (S_{\pi^*,1} - S_{\pi^*,0})\big)}
  {\underset{u \leftarrow \mu_{\delta}^{k}}{\Pr}[u \in \cG_1 \setminus \cG_0]}\right] \\
  % &\overset{\hphantom{a(*)}\hphantom{a}}{\geq} \underset{\pi^*}{\mathbb{E}}
  % \left[\frac{\Pr[c_1 = 1 \land c \in \cG_1 \setminus \cG_0]  - (S_{\pi^*,1} - S_{\pi^*,0})}
  % {\underset{u \leftarrow \mu_{\delta}^{k}}{\Pr}[u \in \cG_1 \setminus \cG_0]}\right] \\
  &\overset{\eqref{pr:low_surpluses}}{\geq} \underset{\pi^*}{\mathbb{E}}
  \left[\frac{\Pr_{\pi^{(k)}}[g(c)=1] - \Pr_{\pi^{(k)}}[c \in \cG_0]  - (1 - \frac{1}{k})\epsilon + S_{\pi^*,0}}
  {\underset{u \leftarrow \mu_{\delta}^{k}}{\Pr}[u \in \cG_1 \setminus \cG_0]}\right] \\
  &\overset{\eqref{eq:s_pi_b}}{=} \underset{\pi^*}{\mathbb{E}}
  \left[\frac{\Pr_{\pi^{(k)}}[g(c)=1] - \Pr_{u \leftarrow \mu_{\delta}^{k}}[u \in \cG_0] - S_{\pi^*,0}  - (1 - \frac{1}{k})\epsilon + S_{\pi^*,0}}
  {\underset{u \leftarrow \mu_{\delta}^{k}}{\Pr}[u \in \cG_1 \setminus \cG_0]}\right]\\
  &\overset{\substack{\eqref{eq:gu_rel}\\\eqref{eq:lemma_assum}}}{\geq} \underset{\pi^*}{\mathbb{E}}
  \left[\frac{\delta \Pr_{u \leftarrow \mu_{\delta}^{k}}[u \in \cG_1 \setminus \cG_0] + \epsilon  - (1 - \frac{1}{k})\epsilon}
  {\underset{u \leftarrow \mu_{\delta}^{k}}{\Pr}[u \in \cG_1 \setminus \cG_0]}\right] \geq \delta + \frac{\epsilon}{k},
  %
  % &\overset{\hphantom{\eqref{eq:diff_s01_next}}}{=} \frac{\Pr_{\pi^{(k)}}[c_1 = 1 \land c \in \cG_1 \setminus \cG_0]}{\Pr_{\pi^{(k)}}[c \in \cG_1 \setminus \cG_0]} \\
  % &\overset{\eqref{eq:diff_s01_next}}{=} \underset{\pi^*}{\mathbb{E}}\left[\frac{\Pr_{\pi^{(k-1)}}[c_1^* = 1 \land c \in \cG_1 \setminus \cG_0]
  %   \big(\Pr_{\pi^{(k-1)}}[c \in \cG_0 \setminus \cG_1] - (S_{\pi^*,1} - S_{\pi^*,0})\big)}
  % {\underset{\pi^{(k-1)}}{\Pr}[c \in \cG_0 \setminus \cG_1] \underset{u \leftarrow \mu_{\delta}^{k}}{\Pr}[u \in \cG_1 \setminus \cG_0]}\right]  \\
  % &\overset{\hphantom{\eqref{eq:diff_s01_next}}}{\geq} \underset{\pi^*}{\mathbb{E}}\left[\frac{\Pr_{\pi^{(k-1)}}[c_1^* = 1 \land c \in \cG_1 \setminus \cG_0]
  %   \big(\Pr_{\pi^{(k-1)}}[c \in \cG_0 \setminus \cG_1] - (1 - \frac{1}{k})\epsilon\big)}
  % {\underset{\pi^{(k-1)}}{\Pr}[c \in \cG_0 \setminus \cG_1] \underset{u \leftarrow \mu_{\delta}^{k}}{\Pr}[u \in \cG_1 \setminus \cG_0]}\right]  \\
  % &\overset{\hphantom{\eqref{eq:diff_s01_next}}}{\geq} \frac{\Pr_{\pi^{(k)}}[c_1 = 1 \land c \in \cG_1 \setminus \cG_0] -
  %   (1 - \frac{1}{k})\epsilon}{\underset{u \leftarrow \mu_{\delta}^{k}}{\Pr}[u \in \cG_1 \setminus \cG_0]} \\
  % &\overset{\eqref{eq:gu_rel}}{\geq} \frac{\delta \underset{}{\Pr}[u \in \cG_1 \setminus \cG_0] + \epsilon - (1-\frac{1}{k})\epsilon}{\underset{}{\Pr}[u \in \cG_1 \setminus \cG_0]} \\
  % &\overset{\hphantom{\eqref{eq:diff_s01_next}}}{\geq} \delta +  \frac{\epsilon}{k},
\end{align*}
where in $(*)$ we use the facts that $\widetilde{D}_2(x,\rho) \neq \bot$ if and only if $\widetilde{D}_2$ finds $c \in \cG_1 \setminus \cG_0$
and conditioned on $\widetilde{D}_2(x,\rho) \neq \bot$  we have that $\Gamma_V(\widetilde{D}_2(x,r)) = 1$ if and only if $c_1 = 1$.